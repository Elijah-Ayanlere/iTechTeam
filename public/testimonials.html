<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>iTech Team</title>
  <link rel="icon" href="image/submarklogo.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <style>
    .star-rating {
      display: flex;
      cursor: pointer;
    }
    .star {
      width: 25px;
      height: 25px;
      background-color: #d3d3d3;
      margin-right: 5px;
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    }
    .star.filled {
      background-color: #f39c12;
    }
    .font-noto {
      font-family: 'Noto Sans', sans-serif;
    }
    .font-nunito {
      font-family: 'Nunito', sans-serif;
    }
    .font-poppins {
      font-family: 'Poppins', sans-serif;
    }
  </style>
</head>
<body class="antialiased bg-gray-100 font-poppins">

  <!-- Navigation -->
  <nav class="bg-sky-900 text-white static text-sm">
    <div class="container mx-auto flex items-center justify-between py-4 px-6">
      <!-- Logo Section -->
      <a href="index.html">
        <div class="flex items-center">
          <img src="image/itechteam logo.png" alt="iTech Team Logo" style="width: 30%;">
        </div>
      </a>

      <!-- Navigation Links (Desktop) -->
      <ul class="hidden md:flex items-center space-x-6">
        <!-- Regular menu items -->
        <li><a href="index.html" class="hover:text-gray-300 font-bold">Home</a></li>
        <li><a href="services.html" class="hover:text-gray-300 font-bold hide-on-show-more-desktop">Services</a></li>
        <li><a href="about.html" class="hover:text-gray-300 font-bold hide-on-show-more-desktop">About Us</a></li>
        <li><a href="team.html" class="hover:text-gray-300 font-bold hide-on-show-more-desktop">Meet the Teams</a></li>
        <li><a href="mindset.html" class="hover:text-gray-300 font-bold">Mindset</a></li>
    
        <!-- Dropdown -->
        <li class="relative group">
            <a href="#" class="hover:text-gray-300 font-bold">Start Your Business</a>
            <ul class="hidden group-hover:flex flex-col absolute z-10 top-full bg-sky-900 shadow-lg w-48 py-2 text-white">
                <li><a href="start_a_business.html" class="block px-4 py-2">Startup Roadmap</a></li>
                <li><a href="solution.html" class="block px-4 py-2">Itechteam Solution</a></li>
                <li><a href="start_your_business.html" class="block px-4 py-2">Start Your Business</a></li>
                <li><a href="start_your_company.html" class="block px-4 py-2">Start Your Company</a></li>
                <li><a class="relative group px-4 py-2 font-bold" href="#" id="showAdditionalNavDesktop">Show More</a></li>
            </ul>
        </li>
    
        <!-- Additional items initially hidden -->
        <li class="hidden additional-nav-items font-bold">
            <a href="manage_business.html" class="block px-4 py-2">Manage Your Business</a>
        </li>
          <li class="hidden additional-nav-items font-bold relative group">
            <a href="#" class="block px-4 py-2">
                Fast Services
            </a>
            <ul class="hidden group-hover:flex flex-col absolute z-10 top-full bg-sky-900 shadow-lg w-56 py-2 text-white">
                <li><a href="2weeks_service.html" class="block px-4 py-2">2-weeks services or less</a></li>
                <li><a href="1month_service.html" class="block px-4 py-2">1 month service or less</a></li>
                <li><a href="2month_service.html" class="block px-4 py-2">2 Months Services or More</a></li>
            </ul>
          </li>
          <li class="hidden additional-nav-items font-bold relative group">
            <a href="#" class="block px-4 py-2">
                Products
            </a>
            <ul class="hidden group-hover:flex flex-col absolute z-10 top-full bg-sky-900 shadow-lg w-56 py-2 text-white">
                <li><a href="digital_products.html" class="block px-4 py-2">Digital Products</a></li>
                <li><a href="physical_products.html" class="block px-4 py-2">Physical Products</a></li>
            </ul>
          </li>
        <li><a href="contact.html" class="hover:text-gray-300 font-bold">Contact Us</a></li>
    </ul>      

      <!-- Hamburger Menu (Mobile) -->
      <div class="md:hidden">
        <button id="menu-toggle" class="focus:outline-none text-white">
          <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden bg-sky-900">
        <ul class="flex flex-col items-left ml-5 space-y-4 py-4">
            <!-- Regular menu items -->
            <li><a href="index.html" class="hover:text-gray-300 font-bold">Home</a></li>
            <li><a href="services.html" class="hover:text-gray-300 font-bold">Services</a></li>
            <li><a href="about.html" class="hover:text-gray-300 font-bold">About Us</a></li>
            <li><a href="team.html" class="hover:text-gray-300 font-bold">Meet the Teams</a></li>
            <li><a href="mindset.html" class="hover:text-gray-300 font-bold">Mindset</a></li>
    
            <!-- Dropdown -->
            <li class="relative">
                <a href="#" class="hover:text-gray-300 font-bold" id="startYourBusinessMobile">Start Your Business</a>
                <ul id="startYourBusinessDropdownMobile" class="flex flex-col bg-sky-900 w-48 py-2 text-white hidden">
                    <li><a href="start_a_business.html" class="block px-4 py-2 hide-on-show-more">Startup Roadmap</a></li>
                    <li><a href="solution.html" class="block px-4 py-2 hide-on-show-more">Itechteam Solution</a></li>
                    <li><a href="start_your_business.html" class="block px-4 py-2 hide-on-show-more">Start Your Business</a></li>
                    <li><a href="start_your_company.html" class="block px-4 py-2 hide-on-show-more">Start Your Company</a></li>
                    <li><a href="#" class="px-4 py-2 font-bold" id="showAdditionalNavMobile">Show More</a></li>
                </ul>
            </li>            
    
            <!-- Additional items initially hidden -->
            <li class="hidden additional-nav-items">
                <a href="manage_business.html" class="block px-4 py-2">Manage Your Business</a>
            </li>
            <li class="hidden additional-nav-items relative group">
                <a href="#" class="block px-4 py-2">Fast Services</a>
                <ul class="hidden absolute left-0 top-full mt-2 w-56 bg-sky-900 shadow-lg group-hover:block z-10">
                    <li><a href="2weeks_service.html" class="block px-4 py-2">2-weeks services or less</a></li>
                    <li><a href="1month_service.html" class="block px-4 py-2">1 month service or less</a></li>
                    <li><a href="2month_service.html" class="block px-4 py-2">2 Months Services or More</a></li>
                </ul>
            </li>
            <li class="hidden additional-nav-items relative group">
              <a href="#" class="block px-4 py-2">
                  Products
              </a>
              <ul class="hidden group-hover:flex flex-col absolute z-10 top-full bg-sky-900 shadow-lg w-56 py-2 text-white">
                  <li><a href="digital_products.html" class="block px-4 py-2">Digital Products</a></li>
                  <li><a href="physical_products.html" class="block px-4 py-2">Physical Products</a></li>
              </ul>
            </li>
          <li><a href="contact.html" class="hover:text-gray-300 font-bold">Contact Us</a></li>
        </ul>
    </div>    
  </nav>

  <div class="container mx-auto px-4">
    <h1 class="text-2xl mt-10 lg:text-3xl text-center font-bold text-sky-900">Customer Review</h1>

    <!-- Display Review -->
    <div id="testimonialsContainer" class="mt-10 flex flex-wrap gap-6 justify-center">
        <!-- Testimonials will be dynamically inserted here -->
    </div>

    <div id="noTestimonyMessage" class="text-center text-gray-500 mt-10 hidden">
        <p>No reviews/testimony</p>
    </div>

    <h1 class="text-2xl mt-24 lg:text-3xl text-center font-bold text-sky-900">Submit your review/testimony!</h1>
    <!-- Testimonial Form -->
    <div class="flex justify-center mt-10">
        <input id="userName" type="text" class="w-full lg:w-1/2 border-b border-gray-400 bg-gray-100 focus:outline-none focus:border-blue-800 p-2" placeholder="Enter your name" />
    </div>

    <div class="flex justify-center mt-6">
        <textarea id="testimonialText" class="w-full lg:w-1/2 p-4 border border-gray-400 bg-gray-100 rounded focus:outline-none focus:border-blue-800" placeholder="Write your testimonial here..."></textarea>
    </div>

    <div class="flex justify-center mt-8">
        <div id="starRating" class="star-rating flex">
            <div class="star cursor-pointer" data-value="1">&#9733;</div>
            <div class="star cursor-pointer" data-value="2">&#9733;</div>
            <div class="star cursor-pointer" data-value="3">&#9733;</div>
            <div class="star cursor-pointer" data-value="4">&#9733;</div>
            <div class="star cursor-pointer" data-value="5">&#9733;</div>
        </div>
    </div>

    <div class="flex justify-center mt-4">
        <button id="submitTestimonial" class="bg-sky-900 h-12 w-72 text-white px-6 py-2 rounded-xl text-lg mt-6 font-bold mb-12">SUBMIT</button>
    </div>
</div>
  
  <section class="relative bg-cover bg-center py-12 text-white overflow-x-hidden" style="background-image: url('image/world.png');">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-sky-900 opacity-40"></div>
    
    <!-- Content -->
    <div class="relative container mx-auto px-6 lg:px-20 grid grid-cols-1 md:grid-cols-3 gap-12">
      <!-- Logo and Newsletter Section -->
      <div>
        <!-- Logo -->
        <a href="index.html">
          <div class="mb-8">
            <img src="image/itechteam logo.png" alt="Logo" class="h-64">
          </div>
        </a>
        <!-- Newsletter -->
        <h3 class="text-2xl sm:text-xl md:text-2xl lg:text-2xl font-bold mb-4">Subscribe to our newsletter</h3>
        <form class="space-y-4">
          <!-- Input Field -->
          <input
            type="email"
            placeholder="yourname@email.com"
            class="w-full px-4 py-2 rounded-md text-black focus:outline-none"
          >
          <!-- Button -->
          <button
            type="submit"
            class="w-full bg-sky-900 px-6 py-3 rounded-md shadow-md text-center font-bold hover:bg-sky-800 transition duration-300"
          >
            Subscribe
          </button>
        </form>
        <!-- Social Media Icons -->
        <div class="flex gap-4 mt-8">
          <a href="#" class="bg-black p-3 rounded-full">
            <img src="image/facebook logo.png" alt="Facebook" class="h-6 w-6">
          </a>
          <a href="#" class="bg-black p-3 rounded-full">
            <img src="image/instagram logo.png" alt="Instagram" class="h-6 w-6">
          </a>
          <a href="#" class="bg-black p-3 rounded-full">
            <img src="image/twitter logo.png" alt="Twitter" class="h-6 w-6">
          </a>
          <a href="#" class="bg-black p-3 rounded-full">
            <img src="image/linkedin.jpeg" alt="Twitter" class="h-6 w-6">
          </a>
        </div>
      </div>
  
      <!-- Quick Links Section -->
      <div class="mt-8 md:mt-32 md:ml-24 lg:ml-36">
        <h3 class="text-2xl sm:text-xl md:text-3xl font-bold mb-6 whitespace-nowrap">Quick Links</h3>
        <ul class="space-y-2 md:space-y-4 text-xl md:text-2xl lg:text-2xl">
          <li><a href="index.html" class="hover:underline">Home</a></li>
          <li><a href="services.html" class="hover:underline">Service</a></li>
          <li><a href="about.html" class="hover:underline">About Us</a></li>
          <li><a href="team.html" class="hover:underline">Meet the Team</a></li>
          <li><a href="mindset.html" class="hover:underline">Mindset</a></li>
          <li><a href="start_a_business.html" class="hover:underline">Start a Business</a></li>
          <li><a href="contact.html" class="hover:underline">Contact Us</a></li>
        </ul>
      </div>
  
      <!-- Fast Services Section -->
      <div class="mt-8 md:mt-32 md:ml-16 lg:ml-32">
        <h3 class="text-2xl sm:text-xl md:text-3xl font-bold mb-6 whitespace-nowrap">Fast Services</h3>
        <ul class="space-y-2 md:space-y-4 text-xl md:text-2xl lg:text-2xl">
          <li><a href="1month_service.html" class="hover:underline">1 Month services or less</a></li>
          <li><a href="2weeks_service.html" class="hover:underline">2 Weeks services or less</a></li>
          <li><a href="2month_service.html" class="hover:underline">2 Months services or more</a></li>
        </ul>
      </div>
    </div>
  </section>


  <!-- JavaScript -->
  <script>
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');

    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    function toggleCheckbox(id) {
        const checkbox = document.getElementById(id);
        const circle = checkbox.querySelector('circle');

        if (checkbox.classList.contains('checked')) {
            // Uncheck
            checkbox.classList.remove('checked');
            circle.classList.remove('fill-sky-900'); // Remove the filled background
            circle.classList.add('fill-white'); // Add the white background
        } else {
            // Check
            checkbox.classList.add('checked');
            circle.classList.remove('fill-white'); // Remove the white background
            circle.classList.add('fill-sky-900'); // Add the filled background
        }
    }

    // Function for desktop "Show More" button
    document.getElementById('showAdditionalNavDesktop').addEventListener('click', function (event) {
        event.preventDefault(); // Prevent default link behavior

        // Button for toggling Show More / Show Less
        const button = event.target;
        const isShowingMore = button.textContent.trim() === "Show More";

        // Regular menu items to hide
        const desktopItemsToHide = document.querySelectorAll('.hide-on-show-more-desktop');
        const additionalNavItemsDesktop = document.querySelectorAll('.additional-nav-items');

        if (isShowingMore) {
            // Hide regular menu items
            desktopItemsToHide.forEach(function (item) {
                item.classList.add('hidden'); // Add Tailwind's 'hidden' class
            });

            // Show additional items
            additionalNavItemsDesktop.forEach(function (item) {
                item.classList.remove('hidden'); // Remove Tailwind's 'hidden' class
            });

            // Update button text to "Show Less"
            button.textContent = "Show Less";
        } else {
            // Restore the regular menu items
            desktopItemsToHide.forEach(function (item) {
                item.classList.remove('hidden'); // Remove Tailwind's 'hidden' class
            });

            // Hide additional items
            additionalNavItemsDesktop.forEach(function (item) {
                item.classList.add('hidden'); // Add Tailwind's 'hidden' class
            });

            // Update button text back to "Show More"
            button.textContent = "Show More";
        }
    });


   // Toggle "Start Your Business" dropdown on mobile
    document.getElementById('startYourBusinessMobile').addEventListener('click', function (event) {
        event.preventDefault(); // Prevent default link behavior

        // Find the dropdown under "Start Your Business"
        const dropdown = document.getElementById('startYourBusinessDropdownMobile');

        // Toggle dropdown visibility
        dropdown.classList.toggle('hidden');
    });


    // Mobile "Show More" / "Show Less" toggle functionality
    document.getElementById('showAdditionalNavMobile').addEventListener('click', function (event) {
        event.preventDefault(); // Prevent default link behavior

        // Get the button and toggle its state
        const button = event.target;
        const isShowingMore = button.textContent.trim() === "Show More";

        // Items to hide or show (hide-on-show-more and additional-nav-items)
        const mobileItemsToHide = document.querySelectorAll('.hide-on-show-more');
        const additionalNavItemsMobile = document.querySelectorAll('.additional-nav-items');

        if (isShowingMore) {
            // Hide dropdown items in "Start Your Business"
            mobileItemsToHide.forEach(function (item) {
                item.classList.add('hidden'); // Add Tailwind's 'hidden' class
            });

            // Show additional items
            additionalNavItemsMobile.forEach(function (item) {
                item.classList.remove('hidden'); // Remove Tailwind's 'hidden' class
            });

            // Change button text to "Show Less"
            button.textContent = "Show Less";
        } else {
            // Restore the original dropdown items
            mobileItemsToHide.forEach(function (item) {
                item.classList.remove('hidden'); // Remove Tailwind's 'hidden' class
            });

            // Hide additional items
            additionalNavItemsMobile.forEach(function (item) {
                item.classList.add('hidden'); // Add Tailwind's 'hidden' class
            });

            // Change button text to "Show More"
            button.textContent = "Show More";
        }
    });

    const API_URL = 'http://localhost:3000/testimonials'; // Correct backend endpoint

// Store the selected star rating
let selectedStarRating = 0;

// Handle the star selection
document.querySelectorAll('.star').forEach((star) => {
  star.addEventListener('click', function () {
    selectedStarRating = this.getAttribute('data-value');
    
    // Highlight the stars based on selection
    document.querySelectorAll('.star').forEach((star) => {
      if (star.getAttribute('data-value') <= selectedStarRating) {
        star.classList.add('text-yellow-500');
        star.classList.remove('text-gray-300');
      } else {
        star.classList.add('text-gray-300');
        star.classList.remove('text-yellow-500');
      }
    });
  });
});

// Fetch testimonials from the backend
async function fetchTestimonials() {
  try {
    const response = await fetch(API_URL);
    const testimonials = await response.json();

    if (testimonials.length === 0) {
      document.getElementById('noTestimonyMessage').classList.remove('hidden');
    } else {
      document.getElementById('noTestimonyMessage').classList.add('hidden');
      renderTestimonies(testimonials);
    }
  } catch (error) {
    console.error('Error fetching testimonials:', error);
  }
}

// Render the fetched testimonials
function renderTestimonies(testimonials) {
  const testimonialsContainer = document.getElementById('testimonialsContainer');
  testimonialsContainer.innerHTML = ''; // Clear the container

  testimonials.forEach((testimony) => {
    const testimonyElement = document.createElement('div');
    testimonyElement.className = 'bg-white shadow p-6 rounded-lg w-full lg:w-1/3';

    testimonyElement.innerHTML = `
      <p class="font-bold text-lg">${testimony.user}</p>
      <p class="text-gray-600 mt-2">${testimony.content}</p>
      <div class="mt-4 text-yellow-500">
        ${'★'.repeat(testimony.rating)}${'☆'.repeat(5 - testimony.rating)}
      </div>
      <p class="text-gray-400 mt-2 text-sm">${new Date(testimony.createdAt).toLocaleString()}</p>
    `;

    testimonialsContainer.appendChild(testimonyElement);
  });
}

// Submit a new testimonial to the backend
document.getElementById('submitTestimonial').addEventListener('click', async function () {
  const userName = document.getElementById('userName').value;
  const testimonialText = document.getElementById('testimonialText').value;

  // Check if inputs are not empty and star rating is selected
  if (!userName || !testimonialText || selectedStarRating === 0) {
    alert('Please fill in all fields, including a star rating.');
    return;
  }

  // Create the testimonial object
  const testimony = {
    user: userName,
    content: testimonialText,
    rating: selectedStarRating,
    createdAt: new Date().toISOString(),
  };

  try {
    // Send the testimonial data to the backend
    const response = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(testimony),
    });

    if (!response.ok) {
      throw new Error('Failed to submit testimonial');
    }

    // Fetch and render updated testimonials
    fetchTestimonials();

    // Clear form inputs
    document.getElementById('userName').value = '';
    document.getElementById('testimonialText').value = '';
    selectedStarRating = 0;

    // Reset star rating visual
    document.querySelectorAll('.star').forEach((star) => {
      star.classList.add('text-gray-300');
      star.classList.remove('text-yellow-500');
    });
  } catch (error) {
    console.error('Error submitting testimonial:', error);
  }
});

// Fetch testimonials when the page loads
fetchTestimonials();

  </script>

</body>
</html>